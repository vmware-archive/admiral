<!--
  ~ Copyright (c) 2017-2018 VMware, Inc. All Rights Reserved.
  ~
  ~ This product is licensed to you under the Apache License, Version 2.0 (the "License").
  ~ You may not use this product except in compliance with the License.
  ~
  ~ This product may include a number of subcomponents with separate copyright notices
  ~ and license terms. Your use of these subcomponents is subject to the terms and
  ~ conditions of the subcomponent's license, as noted in the LICENSE file.
  -->

<div class="main-view">
    <img [src]="'./container-image-icons?container-image=' + entity?.documentSelfLink"/>
    <h3 class="deployment-title">{{entity?.name}}</h3>

    <div class="deployment-summary">
        <div class="summary-subsection">
            <div class="summary-subsection-title">{{ "kubernetes.deployments.item.summaryTitle" | i18n }}</div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.creation" | i18n}}</div>
                <div class="right-column">{{entity?.deployment?.metadata.creationTimestamp | date:'yyyy-MM-dd HH:mm:ss' || "--"}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.namespace" | i18n}}</div>
                <div class="right-column">{{entity?.deployment.metadata.namespace}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.replicas" | i18n}}</div>
                <div class="right-column">{{deploymentSpecification?.replicas}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.restartPolicy" | i18n}}</div>
                <div class="right-column">{{deploymentSpecification?.template.spec.restartPolicy}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.terminationGracePeriodSeconds" | i18n}}</div>
                <div class="right-column">{{deploymentSpecification?.template.spec.terminationGracePeriodSeconds}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.dnsPolicy" | i18n}}</div>
                <div class="right-column">{{deploymentSpecification?.template.spec.dnsPolicy}}</div>
                <div class="clear"></div>
            </div>
            <div class="summary-subsection-content-row">
                <div class="left-column">{{"kubernetes.deployments.item.strategy" | i18n}}</div>
                <div class="right-column">{{deploymentSpecification?.strategy.type}}</div>
                <div class="clear"></div>
            </div>
        </div>

        <div class="summary-subsection">
            <div class="summary-subsection-title">{{"kubernetes.deployments.item.containersTitle" | i18n}}</div>

            <table-view [showSearch]="false" [showToolbar]="false">
                <div table-content-view>
                    <clr-datagrid [clDgRowSelection]="false">
                        <clr-dg-column>{{"kubernetes.deployments.item.containers.name" | i18n}}</clr-dg-column>
                        <clr-dg-column>{{"kubernetes.deployments.item.containers.image" | i18n}}</clr-dg-column>
                        <clr-dg-column>{{"kubernetes.deployments.item.containers.env" | i18n}}</clr-dg-column>

                        <clr-dg-row *clrDgItems="let container of this.containers" [clrDgItem]="container">
                            <clr-dg-cell>{{container.name}}</clr-dg-cell>
                            <clr-dg-cell>{{container.image}}</clr-dg-cell>
                            <clr-dg-cell>{{container.env}}</clr-dg-cell>
                        </clr-dg-row>
                    </clr-datagrid>
                </div>
            </table-view>
        </div>
    </div>
</div>
